{% extends "login-layout.html" %}

{% block title %}Password Reset - {{ title }}{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center bg-gray-50 px-4 py-8">
  <div class="w-full max-w-2xl space-y-6">
    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 space-y-4">
      <div>
        <p class="text-xs uppercase tracking-wide text-zinc-500 font-semibold mb-1">Reset workflow</p>
        <h1 class="text-xl font-semibold text-admin-dark">Request a reset link</h1>
        <p class="text-sm text-zinc-500">Use your email or username. We issue a short-lived token stored in SQLite.</p>
      </div>
      <form class="space-y-3" action="{{ base_path }}/api/onboarding/password/reset/request" method="post">
        <input
          type="text"
          name="identifier"
          placeholder="Email or username"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          required
        />
        <button type="submit" class="btn btn-primary w-full justify-center">Send reset token</button>
      </form>
    </div>

    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 space-y-4">
      <div>
        <p class="text-xs uppercase tracking-wide text-zinc-500 font-semibold mb-1">Apply token</p>
        <h2 class="text-lg font-semibold text-admin-dark">Confirm reset or invite</h2>
        <p class="text-sm text-zinc-500">Paste the token from your email or invite and choose a new password.</p>
      </div>
      <form class="space-y-3" action="{{ base_path }}/api/onboarding/password/reset/confirm" method="post">
        <input
          type="text"
          name="token"
          placeholder="Reset or invite token"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          required
        />
        <input
          type="password"
          name="password"
          placeholder="New password"
          class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          required
        />
        <button type="submit" class="btn btn-secondary w-full justify-center">Set password</button>
      </form>
      <p class="text-xs text-zinc-500">Tokens expire after about an hour; invites use the same confirm endpoint.</p>
    </div>
  </div>
</div>
{% endblock %}
