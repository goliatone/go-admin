  {% elif tab_panel.id == "activity" and tab_panel.area_code == "admin.users.detail.activity" %}
    {# Activity Timeline - Hybrid Mode #}
    <div class="max-w-4xl bg-white border border-gray-200 rounded-xl overflow-hidden">
      <div class="p-6">
        <div class="text-xs uppercase tracking-wider text-gray-500 mb-4 font-semibold">Activity</div>

        {% if tab_panel.unavailable %}
          <div class="timeline-empty" role="status" aria-live="polite">
            <div class="timeline-empty-icon">
              <i class="iconoir-warning-triangle"></i>
            </div>
            <div class="timeline-empty-title">Activity unavailable</div>
            <div class="timeline-empty-subtitle">{{ tab_panel.error_message|default:"Activity data is currently unavailable." }}</div>
            {% if tab_panel.unavailable_reason == "permission_denied" %}
              <p class="text-xs text-gray-400 mt-1">Contact your administrator for access.</p>
            {% endif %}
          </div>
        {% elif tab_panel.has_entries %}
          <section class="timeline" aria-label="User activity timeline">
            <div class="timeline-group">
              <div class="timeline-entries">
                {% for entry in tab_panel.entries %}
                  {% set action = entry.action|default:""|lower %}
                  <div class="timeline-entry">
                    <div class="timeline-entry-connector">
                      <span class="timeline-entry-dot
                        {% if action == 'created' %}timeline-entry-dot--created
                        {% elif action == 'updated' %}timeline-entry-dot--updated
                        {% elif action == 'deleted' %}timeline-entry-dot--deleted
                        {% elif action == 'login' or action == 'logout' %}timeline-entry-dot--auth
                        {% elif action == 'viewed' %}timeline-entry-dot--viewed
                        {% else %}timeline-entry-dot--system{% endif %}"></span>
                    </div>
                    <article class="timeline-entry-card">
                      <div class="timeline-entry-header">
                        <div class="timeline-entry-avatar bg-gray-100 text-gray-700" aria-hidden="true">
                          {{ entry.actor|default:"?"|slice:"0:1"|upper }}
                        </div>
                        <div class="timeline-entry-content">
                          <div class="timeline-entry-action">
                            <span class="timeline-action-badge
                              {% if action == 'created' %}timeline-action-badge--created
                              {% elif action == 'updated' %}timeline-action-badge--updated
                              {% elif action == 'deleted' %}timeline-action-badge--deleted
                              {% elif action == 'login' or action == 'logout' %}timeline-action-badge--auth
                              {% elif action == 'viewed' %}timeline-action-badge--viewed
                              {% else %}timeline-action-badge--system{% endif %}">
                              {{ entry.action|default:"action" }}
                            </span>
                          </div>
                          <p class="timeline-entry-sentence">
                            <strong>{{ entry.actor|default:"Unknown" }}</strong>
                            {% if entry.object %}
                              {{ entry.action|default:"updated" }} <strong>{{ entry.object }}</strong>
                            {% else %}
                              performed {{ entry.action|default:"an action" }}
                            {% endif %}
                          </p>
                          <time
                            class="timeline-entry-time"
                            datetime="{{ entry.created_at }}"
                            title="{{ entry.created_at }}"
                            data-relative-time="{{ entry.created_at }}">
                            {{ entry.created_at }}
                          </time>
                          {% if entry.channel and entry.channel != "users" %}
                            <div class="mt-2">
                              <span class="activity-channel">{{ entry.channel }}</span>
                            </div>
                          {% endif %}
                        </div>
                      </div>
                    </article>
                  </div>
                {% endfor %}
              </div>
            </div>
          </section>
        {% else %}
          <div class="timeline-empty" role="status" aria-live="polite">
            <div class="timeline-empty-icon">
              <i class="iconoir-clock"></i>
            </div>
            <div class="timeline-empty-title">No activity yet</div>
            <div class="timeline-empty-subtitle">{{ tab_panel.empty_message|default:"No activity recorded for this user." }}</div>
          </div>
        {% endif %}
      </div>
    </div>
