{% extends "layout.html" %}

{% block title %}Media - {{ resource_item.filename|default:"Detail" }} - {{ title }}{% endblock %}

{% block content %}
<header class="px-8 py-6 bg-white border-b border-gray-200 flex justify-between items-center">
  <div>
    <p class="text-sm text-gray-500 mb-1">Media</p>
    <h1 class="text-3xl font-bold text-admin-dark">{{ resource_item.filename|default:"Media Item" }}</h1>
  </div>
  <div class="flex gap-3">
    <a href="{{ resource_item.actions.edit }}" class="btn btn-secondary">Edit</a>
    <button type="button" class="btn btn-danger" onclick="deleteResource('{{ resource_item.actions.delete }}')">Delete</button>
  </div>
</header>

<div class="flex-1 p-8 overflow-y-auto">
  <div class="bg-white border border-gray-200 rounded-xl p-6 space-y-4">
    {% for field in fields %}
    <div>
      <p class="text-sm font-semibold text-gray-600">{{ field.label }}</p>
      <p class="text-gray-900 whitespace-pre-line">{{ field.value|default:"-" }}</p>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
	async function deleteResource(url) {
	  if (!window.toastManager) {
	    console.error('[deleteResource] ToastManager not available');
	    return;
	  }
	  const confirmed = await window.toastManager.confirm(
	    'Are you sure you want to delete this item?',
	    { title: 'Confirm Delete', confirmText: 'Delete', cancelText: 'Cancel' }
	  );
	  if (!confirmed) return;
	  const form = document.createElement('form');
	  form.method = 'POST';
	  form.action = url;
	  document.body.appendChild(form);
	  form.submit();
	}
</script>
{% endblock %}
