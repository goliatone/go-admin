{% extends "layout.html" %}

{% block title %}{% if is_edit %}Edit Page{% else %}New Page{% endif %} - {{ title }}{% endblock %}

{% block content %}
  <header class="px-8 py-6 bg-white border-b border-gray-200 flex justify-between items-center">
    <h1 class="text-3xl font-bold text-admin-dark">{% if is_edit %}Edit{% else %}Create{% endif %} Page</h1>
    <div class="flex gap-3">
      {% if preview_url %}
        <a href="{{ preview_url }}" class="btn btn-secondary" target="_blank" rel="noopener">Preview</a>
      {% endif %}
      {% if routes.index %}
        <a href="{{ routes.index }}" class="btn btn-secondary">
          <i class="iconoir-arrow-left"></i>
          Back to Pages
        </a>
      {% endif %}
    </div>
  </header>

  <div class="flex-1 p-8 overflow-y-auto">
    {{ form_html|safe }}
  </div>
{% endblock %}

{% block scripts %}
<script src="{{ base_path }}/runtime/formgen-behaviors.min.js" defer></script>
<script src="/runtime/formgen-relationships.min.js" defer></script>
<script>
  window.addEventListener("DOMContentLoaded", () => {
    const api = window.FormgenRelationships;
    if (api && typeof api.initRelationships === "function") {
      api.initRelationships();
    }
  });
</script>
{% endblock %}
