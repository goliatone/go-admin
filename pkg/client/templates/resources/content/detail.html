{% extends "resources/shared/detail-base.html" %}

{% set avatar_type = "content" %}

{% block header_pretitle %}
  <p class="text-sm text-gray-500 mb-1">{{ resource_label|default:"Content" }}</p>
{% endblock %}

{% block detail_content %}
  {# Translation Summary for multilingual content #}
  {% set has_translation_context = resource_item.translation_group_id or (resource_item.translation and resource_item.translation.meta and resource_item.translation.meta.translation_group_id) %}
  {% if has_translation_context %}
    {% set translation_context = {} %}
    {% set translation_context = translation_context|merge({'translation_group_id': resource_item.translation_group_id|default:(resource_item.translation.meta.translation_group_id if resource_item.translation and resource_item.translation.meta else '')}) %}
    {% set translation_context = translation_context|merge({'requested_locale': resource_item.requested_locale|default:(resource_item.translation.meta.requested_locale if resource_item.translation and resource_item.translation.meta else '')}) %}
    {% set translation_context = translation_context|merge({'resolved_locale': resource_item.resolved_locale|default:resource_item.locale|default:(resource_item.translation.meta.resolved_locale if resource_item.translation and resource_item.translation.meta else '')}) %}
    {% set translation_context = translation_context|merge({'available_locales': resource_item.available_locales|default:(resource_item.translation.meta.available_locales if resource_item.translation and resource_item.translation.meta else [])}) %}
    {% set translation_context = translation_context|merge({'missing_requested_locale': resource_item.missing_requested_locale|default:(resource_item.translation.meta.missing_requested_locale if resource_item.translation and resource_item.translation.meta else false)}) %}
    {% set translation_context = translation_context|merge({'fallback_used': resource_item.fallback_used|default:(resource_item.translation.meta.fallback_used if resource_item.translation and resource_item.translation.meta else false)}) %}
    {% include "partials/translation-summary.html" with translation_context=translation_context panel_name=panel_name record_id=resource_item.id show_create_actions=true compact=false %}
  {% endif %}
  {{ block.super }}
{% endblock %}

{% block header_title %}{{ resource_item.title|default:resource_item.slug|default:"Entry" }}{% endblock %}

{% block identity_title %}{{ resource_item.title|default:resource_item.slug|default:"Entry" }}{% endblock %}

{% block identity_subtitle %}
  {% if resource_item.slug %}
    <p class="text-sm text-gray-500 truncate">/{{ resource_item.slug }}</p>
  {% endif %}
  {% if resource_item.content_type %}
    <p class="text-xs text-gray-400">{{ resource_item.content_type }}</p>
  {% endif %}
{% endblock %}

{% block fields_section %}
  <div class="p-6">
    {% for field in fields %}
      <div class="{% if not loop.first %}mt-4 pt-4 border-t border-gray-100{% endif %}">
        <p class="text-sm font-medium text-gray-500 mb-1">{{ field.label }}</p>
        <p class="text-gray-900 whitespace-pre-line">{{ field.value|default:"-" }}</p>
      </div>
    {% endfor %}
  </div>
{% endblock %}
