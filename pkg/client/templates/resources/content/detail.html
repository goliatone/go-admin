{% extends "resources/shared/detail-base.html" %}

{% set avatar_type = "content" %}

{% block header_pretitle %}
  <p class="text-sm text-gray-500 mb-1">{{ resource_label|default:"Content" }}</p>
{% endblock %}

{% block detail_content_pre %}
  {# Translation Summary for multilingual content #}
  {% set has_translation_context = resource_item.translation_group_id %}
  {% if not has_translation_context and resource_item.translation and resource_item.translation.meta and resource_item.translation.meta.translation_group_id %}
    {% set has_translation_context = resource_item.translation.meta.translation_group_id %}
  {% endif %}
  {% if has_translation_context %}
    {% set translation_group_id = resource_item.translation_group_id %}
    {% if not translation_group_id and resource_item.translation and resource_item.translation.meta %}
      {% set translation_group_id = resource_item.translation.meta.translation_group_id %}
    {% endif %}
    {% set requested_locale = resource_item.requested_locale %}
    {% if not requested_locale and resource_item.translation and resource_item.translation.meta %}
      {% set requested_locale = resource_item.translation.meta.requested_locale %}
    {% endif %}
    {% set resolved_locale = resource_item.resolved_locale %}
    {% if not resolved_locale and resource_item.locale %}
      {% set resolved_locale = resource_item.locale %}
    {% endif %}
    {% if not resolved_locale and resource_item.translation and resource_item.translation.meta %}
      {% set resolved_locale = resource_item.translation.meta.resolved_locale %}
    {% endif %}
    {% set available_locales = resource_item.available_locales %}
    {% if not available_locales and resource_item.translation and resource_item.translation.meta %}
      {% set available_locales = resource_item.translation.meta.available_locales %}
    {% endif %}
    {% set missing_requested_locale = resource_item.missing_requested_locale %}
    {% if not missing_requested_locale and resource_item.translation and resource_item.translation.meta and resource_item.translation.meta.missing_requested_locale %}
      {% set missing_requested_locale = true %}
    {% endif %}
    {% set fallback_used = resource_item.fallback_used %}
    {% if not fallback_used and resource_item.translation and resource_item.translation.meta and resource_item.translation.meta.fallback_used %}
      {% set fallback_used = true %}
    {% endif %}
    {% include "partials/translation-summary.html" with translation_group_id=translation_group_id requested_locale=requested_locale resolved_locale=resolved_locale available_locales=available_locales missing_requested_locale=missing_requested_locale fallback_used=fallback_used panel_name=panel_name record_id=resource_item.id show_create_actions=true compact=false %}
  {% endif %}
{% endblock %}

{% block header_title %}{{ resource_item.title|default:resource_item.slug|default:"Entry" }}{% endblock %}

{% block identity_title %}{{ resource_item.title|default:resource_item.slug|default:"Entry" }}{% endblock %}

{% block identity_subtitle %}
  {% if resource_item.slug %}
    <p class="text-sm text-gray-500 truncate">/{{ resource_item.slug }}</p>
  {% endif %}
  {% if resource_item.content_type %}
    <p class="text-xs text-gray-400">{{ resource_item.content_type }}</p>
  {% endif %}
{% endblock %}

{% block fields_section %}
  <div class="p-6">
    {% for field in fields %}
      <div class="{% if not loop.first %}mt-4 pt-4 border-t border-gray-100{% endif %}">
        <p class="text-sm font-medium text-gray-500 mb-1">{{ field.label }}</p>
        <p class="text-gray-900 whitespace-pre-line">{{ field.value|default:"-" }}</p>
      </div>
    {% endfor %}
  </div>
{% endblock %}
