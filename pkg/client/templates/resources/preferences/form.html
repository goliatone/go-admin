{% extends "layout.html" %}

{% block title %}Preferences - {{ title }}{% endblock %}

{% block content %}
  <header class="px-8 py-6 bg-white border-b border-gray-200 flex justify-between items-center">
    <h1 class="text-3xl font-bold text-admin-dark">Preferences</h1>
  </header>

  <div class="flex-1 p-8 overflow-y-auto" data-preferences-form data-json-editor-strict="{{ json_editor_strict }}">
    {{ form_html|safe }}

    {% if preferences.dashboard_layout or preferences.dashboard_overrides %}
    <div class="max-w-4xl mx-auto mt-8 space-y-6">
      {% if preferences.dashboard_layout %}
      <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
        <label for="pref-dashboard-layout" class="block text-sm font-medium text-gray-700">Dashboard Layout (read-only)</label>
        <textarea
          id="pref-dashboard-layout"
          rows="6"
          readonly
          class="mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-xs text-gray-700 font-mono focus:outline-none"
        >{{ preferences.dashboard_layout }}</textarea>
      </div>
      {% endif %}

      {% if preferences.dashboard_overrides %}
      <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
        <label for="pref-dashboard-overrides" class="block text-sm font-medium text-gray-700">Dashboard Overrides (read-only)</label>
        <textarea
          id="pref-dashboard-overrides"
          rows="6"
          readonly
          class="mt-2 w-full rounded-lg border border-gray-200 px-3 py-2 text-xs text-gray-700 font-mono focus:outline-none"
        >{{ preferences.dashboard_overrides }}</textarea>
      </div>
      {% endif %}
    </div>
    {% endif %}
  </div>
{% endblock %}

{% block scripts %}
<script src="{{ base_path }}/runtime/formgen-behaviors.min.js" defer></script>
<script type="module" src="{{ base_path }}/assets/dist/formgen/preferences.js"></script>
{% endblock %}
