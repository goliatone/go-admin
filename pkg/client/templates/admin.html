{% extends "layout.html" %}

{% block title %}Dashboard - {{ title }}{% endblock %}

{% block content %}
<header class="px-8 py-6 bg-white border-b border-gray-200 flex justify-between items-center">
  <h1 class="text-3xl font-bold text-admin-dark">Dashboard</h1>
  <div class="flex gap-3">
    <button id="dashboard-export" class="btn btn-secondary">â†‘ Export</button>
  </div>
</header>

<!-- Save status indicator -->
<div id="save-status" class="px-8 py-3 bg-blue-50 text-blue-900 text-sm border-b border-blue-200">
  Drag widgets to rearrange, resize, or hide them. Changes save automatically.
</div>

<div class="flex-1 p-8 overflow-y-auto" data-widget-grid>
  <!-- Widget Grid Container -->
  <div class="dashboard-grid grid grid-cols-1 lg:grid-cols-3 gap-8">

    <!-- Main Area -->
    <section class="widget-area lg:col-span-2" data-area-code="admin.dashboard.main">
      <h2 class="widget-area__title text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4">Main Dashboard</h2>
      <div class="widgets-grid" data-widgets-grid data-area-grid="admin.dashboard.main">
        <!-- Widgets will be rendered here -->
      </div>
    </section>

    <!-- Sidebar Area -->
    <aside class="widget-area" data-area-code="admin.dashboard.sidebar">
      <h2 class="widget-area__title text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4">Sidebar</h2>
      <div class="widgets-grid" data-widgets-grid data-area-grid="admin.dashboard.sidebar">
        <!-- Widgets will be rendered here -->
      </div>
    </aside>

    <!-- Footer/Operations Area -->
    <section class="widget-area lg:col-span-3" data-area-code="admin.dashboard.footer">
      <h2 class="widget-area__title text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4">Operations</h2>
      <div class="widgets-grid" data-widgets-grid data-area-grid="admin.dashboard.footer">
        <!-- Widgets will be rendered here -->
      </div>
    </section>

  </div>
</div>
{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{{ base_path }}/assets/dist/styles/widgets.css">
{% endblock %}

{% block scripts %}
<!-- Dashboard configuration (consumed by TypeScript module) -->
<script type="application/json" id="admin-dashboard-config">
{
  "basePath": "{{ base_path }}",
  "apiBasePath": "{{ api_base_path|default:"" }}",
  "activityActionLabels": {{ toJSON(activity_action_labels)|safe }}
}
</script>

<!-- Load and bootstrap dashboard -->
<script type="module">
import { bootstrapAdminDashboard } from '{{ base_path }}/assets/dist/dashboard/index.js';
window.addEventListener('DOMContentLoaded', bootstrapAdminDashboard);
</script>
{% endblock %}
