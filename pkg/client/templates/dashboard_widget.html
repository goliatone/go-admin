{% set effective_span = formatNumber(widget.span|default:12) %}
<article class="widget"
         data-widget="{{ widget.id }}"
         data-span="{{ effective_span }}"
         data-area-code="{{ widget.area }}"
         data-resizable="{% if widget.area == "admin.dashboard.main" or widget.area == "admin.dashboard.footer" %}true{% else %}false{% endif %}"
         {% if widget.hidden %}data-hidden="true"{% endif %}
         style="--span: {{ effective_span }}">
  <div class="widget__toolbar">
    <button type="button" class="hide-widget">Toggle Hide</button>
    {% if widget.area == "admin.dashboard.main" or widget.area == "admin.dashboard.footer" %}
      <button type="button" class="resize-widget">Half Width</button>
    {% else %}
      <button type="button" class="resize-widget" disabled title="Resize only available in Main or Operations">Half Width</button>
    {% endif %}
  </div>
  <div class="widget__header mb-4">
    <button type="button" class="widget-drag-handle" title="Drag to reorder" aria-label="Drag to reorder widget">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path>
      </svg>
    </button>
    <h3 class="text-lg font-semibold text-gray-900">{{ getWidgetTitle(widget.definition) }}</h3>
  </div>
  <div class="widget__content">
    {% include "dashboard_widget_content.html" %}
  </div>
</article>
