{"version":3,"file":"index.js","sources":["../../src/searchbox/resolvers/static-resolver.ts","../../src/searchbox/renderers/simple-renderer.ts"],"sourcesContent":["/**\n * Static Resolver\n * Searches through a static list of items in memory\n */\n\nimport type { SearchResult, SearchResolver, StaticResolverConfig } from '../types.js';\n\nconst DEFAULT_CONFIG = {\n  searchFields: ['label', 'description'] as (keyof SearchResult)[],\n  caseSensitive: false,\n};\n\nexport class StaticResolver<T = unknown> implements SearchResolver<T> {\n  private config: Required<Pick<StaticResolverConfig<T>, 'searchFields' | 'caseSensitive'>> &\n    StaticResolverConfig<T>;\n  private items: SearchResult<T>[];\n\n  constructor(config: StaticResolverConfig<T>) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.items = config.items;\n  }\n\n  async search(query: string, _signal?: AbortSignal): Promise<SearchResult<T>[]> {\n    const searchQuery = this.config.caseSensitive ? query : query.toLowerCase();\n\n    return this.items.filter((item) => {\n      return this.config.searchFields.some((field) => {\n        const value = item[field];\n        if (value === undefined || value === null) return false;\n\n        const strValue = String(value);\n        const compareValue = this.config.caseSensitive ? strValue : strValue.toLowerCase();\n        return compareValue.includes(searchQuery);\n      });\n    });\n  }\n\n  /**\n   * Update the items to search\n   */\n  setItems(items: SearchResult<T>[]): void {\n    this.items = items;\n  }\n\n  /**\n   * Add items to the list\n   */\n  addItems(items: SearchResult<T>[]): void {\n    this.items = [...this.items, ...items];\n  }\n\n  /**\n   * Remove an item by ID\n   */\n  removeItem(id: string): void {\n    this.items = this.items.filter((item) => item.id !== id);\n  }\n\n  /**\n   * Get all items\n   */\n  getItems(): SearchResult<T>[] {\n    return [...this.items];\n  }\n}\n\n/**\n * Create a static resolver from an array of simple objects\n */\nexport function createStaticResolver<T extends { id?: string; name?: string; label?: string }>(\n  items: T[],\n  options?: {\n    labelField?: keyof T;\n    descriptionField?: keyof T;\n    idField?: keyof T;\n  }\n): StaticResolver<T> {\n  const labelField = options?.labelField || 'name' as keyof T;\n  const idField = options?.idField || 'id' as keyof T;\n\n  const searchResults: SearchResult<T>[] = items.map((item) => ({\n    id: String(item[idField] || ''),\n    label: String(item[labelField] || item['label' as keyof T] || ''),\n    description: options?.descriptionField ? String(item[options.descriptionField] || '') : undefined,\n    data: item,\n  }));\n\n  return new StaticResolver<T>({ items: searchResults });\n}\n","/**\n * Simple Renderer\n * Basic renderer for search results with label and optional description\n */\n\nimport type { SearchResult, ResultRenderer, SimpleRendererConfig } from '../types.js';\n\nconst DEFAULT_CONFIG: SimpleRendererConfig = {\n  showDescription: true,\n  showIcon: true,\n  itemClass: 'px-4 py-3 hover:bg-gray-50',\n  selectedClass: 'bg-blue-50',\n};\n\nexport class SimpleRenderer<T = unknown> implements ResultRenderer<T> {\n  protected config: SimpleRendererConfig;\n\n  constructor(config: Partial<SimpleRendererConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  render(result: SearchResult<T>, isSelected: boolean): string {\n    const baseClass = this.config.itemClass || '';\n    const selectedClass = isSelected ? this.config.selectedClass || '' : '';\n    const className = `${baseClass} ${selectedClass}`.trim();\n\n    const iconHtml = this.config.showIcon && result.icon ? this.renderIcon(result.icon) : '';\n    const labelHtml = this.escapeHtml(result.label);\n    const descriptionHtml =\n      this.config.showDescription && result.description\n        ? `<p class=\"text-xs text-gray-500 mt-0.5\">${this.escapeHtml(result.description)}</p>`\n        : '';\n\n    return `\n      <div class=\"${className}\">\n        <div class=\"flex items-center gap-3\">\n          ${iconHtml}\n          <div class=\"flex-1 min-w-0\">\n            <p class=\"text-sm font-medium text-gray-900 truncate\">${labelHtml}</p>\n            ${descriptionHtml}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  protected renderIcon(icon: string): string {\n    // Check if it's a URL (for images)\n    if (icon.startsWith('http') || icon.startsWith('/') || icon.startsWith('data:')) {\n      return `<img src=\"${this.escapeHtml(icon)}\" class=\"w-8 h-8 rounded-full object-cover flex-shrink-0\" alt=\"\" />`;\n    }\n\n    // Otherwise treat as an icon name/class\n    return `<span class=\"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0 text-gray-500\">${this.escapeHtml(icon)}</span>`;\n  }\n\n  protected escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n}\n"],"names":["DEFAULT_CONFIG","StaticResolver","config","query","_signal","searchQuery","item","field","value","strValue","items","id","createStaticResolver","options","labelField","idField","searchResults","SimpleRenderer","result","isSelected","baseClass","selectedClass","className","iconHtml","labelHtml","descriptionHtml","icon","text","div"],"mappings":"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"}