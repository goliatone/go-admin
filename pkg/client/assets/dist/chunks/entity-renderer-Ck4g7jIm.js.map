{"version":3,"file":"entity-renderer-Ck4g7jIm.js","sources":["../../src/searchbox/search-box.ts","../../src/searchbox/resolvers/api-resolver.ts","../../src/searchbox/renderers/user-renderer.ts","../../src/searchbox/renderers/entity-renderer.ts"],"sourcesContent":["/**\n * SearchBox Component\n * A generic, reusable typeahead search component with pluggable resolver and renderer\n */\n\nimport type {\n  SearchBoxConfig,\n  SearchBoxState,\n  SearchResult,\n  SearchResolver,\n  ResultRenderer,\n} from './types.js';\n\nconst DEFAULT_CONFIG = {\n  minChars: 2,\n  debounceMs: 300,\n  placeholder: 'Search...',\n  emptyText: 'No results found',\n  loadingText: 'Searching...',\n  maxResults: 10,\n  dropdownClass: '',\n};\n\nexport class SearchBox<T = unknown> {\n  protected config: Required<\n    Pick<SearchBoxConfig<T>, 'minChars' | 'debounceMs' | 'placeholder' | 'emptyText' | 'loadingText' | 'maxResults' | 'dropdownClass'>\n  > &\n    SearchBoxConfig<T>;\n  protected input: HTMLInputElement;\n  protected container: HTMLElement;\n  protected dropdown: HTMLElement | null = null;\n  protected state: SearchBoxState<T>;\n\n  private debounceTimer: ReturnType<typeof setTimeout> | null = null;\n  private abortController: AbortController | null = null;\n  private documentClickHandler: ((e: MouseEvent) => void) | null = null;\n\n  constructor(config: SearchBoxConfig<T>) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n\n    // Resolve input element\n    if (typeof config.input === 'string') {\n      const el = document.querySelector<HTMLInputElement>(config.input);\n      if (!el) throw new Error(`SearchBox: Input element not found: ${config.input}`);\n      this.input = el;\n    } else {\n      this.input = config.input;\n    }\n\n    // Resolve container\n    if (config.container) {\n      if (typeof config.container === 'string') {\n        const el = document.querySelector<HTMLElement>(config.container);\n        if (!el) throw new Error(`SearchBox: Container element not found: ${config.container}`);\n        this.container = el;\n      } else {\n        this.container = config.container;\n      }\n    } else {\n      this.container = this.input.parentElement || document.body;\n    }\n\n    // Initialize state\n    this.state = {\n      query: '',\n      results: [],\n      selectedIndex: -1,\n      isOpen: false,\n      isLoading: false,\n      error: null,\n    };\n  }\n\n  /**\n   * Initialize the search box\n   */\n  init(): void {\n    this.createDropdown();\n    this.bindEvents();\n    if (this.config.placeholder) {\n      this.input.placeholder = this.config.placeholder;\n    }\n  }\n\n  /**\n   * Destroy the search box and clean up\n   */\n  destroy(): void {\n    this.cancelPendingSearch();\n    this.removeDropdown();\n    this.unbindEvents();\n  }\n\n  /**\n   * Get the current resolver\n   */\n  getResolver(): SearchResolver<T> {\n    return this.config.resolver;\n  }\n\n  /**\n   * Set a new resolver\n   */\n  setResolver(resolver: SearchResolver<T>): void {\n    this.config.resolver = resolver;\n    this.clear();\n  }\n\n  /**\n   * Get the current renderer\n   */\n  getRenderer(): ResultRenderer<T> {\n    return this.config.renderer;\n  }\n\n  /**\n   * Set a new renderer\n   */\n  setRenderer(renderer: ResultRenderer<T>): void {\n    this.config.renderer = renderer;\n    if (this.state.results.length > 0) {\n      this.renderResults();\n    }\n  }\n\n  /**\n   * Clear the search box\n   */\n  clear(): void {\n    this.input.value = '';\n    this.state.query = '';\n    this.state.results = [];\n    this.state.selectedIndex = -1;\n    this.state.error = null;\n    this.closeDropdown();\n    this.config.onClear?.();\n  }\n\n  /**\n   * Get the current selected result\n   */\n  getSelectedResult(): SearchResult<T> | null {\n    if (this.state.selectedIndex >= 0 && this.state.selectedIndex < this.state.results.length) {\n      return this.state.results[this.state.selectedIndex];\n    }\n    return null;\n  }\n\n  /**\n   * Get current state (readonly copy)\n   */\n  getState(): Readonly<SearchBoxState<T>> {\n    return { ...this.state };\n  }\n\n  /**\n   * Programmatically trigger a search\n   */\n  async search(query: string): Promise<void> {\n    this.input.value = query;\n    await this.performSearch(query);\n  }\n\n  /**\n   * Set the input value without triggering search\n   */\n  setValue(value: string): void {\n    this.input.value = value;\n    this.state.query = value;\n  }\n\n  protected createDropdown(): void {\n    this.dropdown = document.createElement('div');\n    this.dropdown.className = `searchbox-dropdown absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden hidden ${this.config.dropdownClass}`;\n    this.dropdown.setAttribute('role', 'listbox');\n    this.dropdown.setAttribute('aria-label', 'Search results');\n\n    // Ensure container has relative positioning\n    const containerPosition = getComputedStyle(this.container).position;\n    if (containerPosition === 'static') {\n      this.container.style.position = 'relative';\n    }\n\n    this.container.appendChild(this.dropdown);\n  }\n\n  protected removeDropdown(): void {\n    if (this.dropdown) {\n      this.dropdown.remove();\n      this.dropdown = null;\n    }\n  }\n\n  protected bindEvents(): void {\n    this.input.addEventListener('input', this.handleInput);\n    this.input.addEventListener('keydown', this.handleKeydown);\n    this.input.addEventListener('focus', this.handleFocus);\n\n    // Close dropdown when clicking outside\n    this.documentClickHandler = (e: MouseEvent) => {\n      if (!this.container.contains(e.target as Node)) {\n        this.closeDropdown();\n      }\n    };\n    document.addEventListener('click', this.documentClickHandler);\n  }\n\n  protected unbindEvents(): void {\n    this.input.removeEventListener('input', this.handleInput);\n    this.input.removeEventListener('keydown', this.handleKeydown);\n    this.input.removeEventListener('focus', this.handleFocus);\n\n    if (this.documentClickHandler) {\n      document.removeEventListener('click', this.documentClickHandler);\n      this.documentClickHandler = null;\n    }\n  }\n\n  protected handleInput = (): void => {\n    const query = this.input.value.trim();\n    this.state.query = query;\n\n    if (query.length < this.config.minChars) {\n      this.state.results = [];\n      this.closeDropdown();\n      return;\n    }\n\n    this.debouncedSearch(query);\n  };\n\n  protected handleKeydown = (e: KeyboardEvent): void => {\n    if (!this.state.isOpen) {\n      if (e.key === 'ArrowDown' && this.state.results.length > 0) {\n        e.preventDefault();\n        this.openDropdown();\n      }\n      return;\n    }\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        this.moveSelection(1);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        this.moveSelection(-1);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        this.selectCurrent();\n        break;\n      case 'Escape':\n        e.preventDefault();\n        this.closeDropdown();\n        break;\n      case 'Tab':\n        this.closeDropdown();\n        break;\n    }\n  };\n\n  protected handleFocus = (): void => {\n    if (this.state.results.length > 0 && this.state.query.length >= this.config.minChars) {\n      this.openDropdown();\n    }\n  };\n\n  protected debouncedSearch(query: string): void {\n    this.cancelPendingSearch();\n\n    this.debounceTimer = setTimeout(() => {\n      this.performSearch(query);\n    }, this.config.debounceMs);\n  }\n\n  protected async performSearch(query: string): Promise<void> {\n    this.cancelPendingSearch();\n\n    if (query.length < this.config.minChars) {\n      return;\n    }\n\n    this.state.isLoading = true;\n    this.state.error = null;\n    this.config.onSearchStart?.(query);\n    this.renderLoading();\n    this.openDropdown();\n\n    this.abortController = new AbortController();\n\n    try {\n      let results = await this.config.resolver.search(query, this.abortController.signal);\n\n      // Limit results\n      if (results.length > this.config.maxResults) {\n        results = results.slice(0, this.config.maxResults);\n      }\n\n      this.state.results = results;\n      this.state.selectedIndex = results.length > 0 ? 0 : -1;\n      this.state.isLoading = false;\n\n      this.renderResults();\n      this.config.onSearchComplete?.(results);\n    } catch (error) {\n      if ((error as Error).name === 'AbortError') {\n        return; // Search was cancelled, ignore\n      }\n\n      this.state.error = error as Error;\n      this.state.isLoading = false;\n      this.renderError();\n      this.config.onError?.(error as Error);\n    }\n  }\n\n  protected cancelPendingSearch(): void {\n    if (this.debounceTimer) {\n      clearTimeout(this.debounceTimer);\n      this.debounceTimer = null;\n    }\n    if (this.abortController) {\n      this.abortController.abort();\n      this.abortController = null;\n    }\n  }\n\n  protected moveSelection(delta: number): void {\n    const { results, selectedIndex } = this.state;\n    if (results.length === 0) return;\n\n    let newIndex = selectedIndex + delta;\n    if (newIndex < 0) newIndex = results.length - 1;\n    if (newIndex >= results.length) newIndex = 0;\n\n    this.state.selectedIndex = newIndex;\n    this.renderResults();\n    this.scrollToSelected();\n  }\n\n  protected selectCurrent(): void {\n    const result = this.getSelectedResult();\n    if (result) {\n      this.selectResult(result);\n    }\n  }\n\n  protected selectResult(result: SearchResult<T>): void {\n    this.input.value = result.label;\n    this.state.query = result.label;\n    this.closeDropdown();\n    this.config.onSelect?.(result);\n  }\n\n  protected openDropdown(): void {\n    if (!this.dropdown) return;\n    this.state.isOpen = true;\n    this.dropdown.classList.remove('hidden');\n  }\n\n  protected closeDropdown(): void {\n    if (!this.dropdown) return;\n    this.state.isOpen = false;\n    this.dropdown.classList.add('hidden');\n  }\n\n  protected renderLoading(): void {\n    if (!this.dropdown) return;\n    this.dropdown.innerHTML = `\n      <div class=\"searchbox-loading px-4 py-3 text-sm text-gray-500 flex items-center gap-2\">\n        <svg class=\"animate-spin h-4 w-4 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n        ${this.escapeHtml(this.config.loadingText)}\n      </div>\n    `;\n  }\n\n  protected renderError(): void {\n    if (!this.dropdown) return;\n    const message = this.state.error?.message || 'An error occurred';\n    this.dropdown.innerHTML = `\n      <div class=\"searchbox-error px-4 py-3 text-sm text-red-600 flex items-center gap-2\">\n        <svg class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg>\n        ${this.escapeHtml(message)}\n      </div>\n    `;\n  }\n\n  protected renderResults(): void {\n    if (!this.dropdown) return;\n\n    const { results, selectedIndex } = this.state;\n\n    if (results.length === 0) {\n      this.dropdown.innerHTML = `\n        <div class=\"searchbox-empty px-4 py-3 text-sm text-gray-500\">\n          ${this.escapeHtml(this.config.emptyText)}\n        </div>\n      `;\n      return;\n    }\n\n    const items = results.map((result, index) => {\n      const isSelected = index === selectedIndex;\n      const html = this.config.renderer.render(result, isSelected);\n      return `\n        <div\n          class=\"searchbox-item cursor-pointer\"\n          data-index=\"${index}\"\n          role=\"option\"\n          aria-selected=\"${isSelected}\"\n        >\n          ${html}\n        </div>\n      `;\n    });\n\n    this.dropdown.innerHTML = items.join('');\n\n    // Bind click handlers\n    this.dropdown.querySelectorAll('.searchbox-item').forEach((item) => {\n      item.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const index = parseInt((item as HTMLElement).dataset.index || '0', 10);\n        const result = results[index];\n        if (result) {\n          this.selectResult(result);\n        }\n      });\n    });\n  }\n\n  protected scrollToSelected(): void {\n    if (!this.dropdown) return;\n    const selected = this.dropdown.querySelector('[aria-selected=\"true\"]');\n    if (selected) {\n      selected.scrollIntoView({ block: 'nearest' });\n    }\n  }\n\n  protected escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n}\n","/**\n * API Resolver\n * Fetches search results from a REST API endpoint\n */\n\nimport type { SearchResult, SearchResolver, ApiResolverConfig } from '../types.js';\n\nconst DEFAULT_CONFIG = {\n  queryParam: 'q',\n  timeout: 5000,\n  params: {},\n  headers: {},\n};\n\nexport class ApiResolver<T = unknown> implements SearchResolver<T> {\n  private config: Required<Pick<ApiResolverConfig<T>, 'queryParam' | 'timeout' | 'params' | 'headers'>> &\n    ApiResolverConfig<T>;\n\n  constructor(config: ApiResolverConfig<T>) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  async search(query: string, signal?: AbortSignal): Promise<SearchResult<T>[]> {\n    const url = this.buildUrl(query);\n\n    const timeoutId = setTimeout(() => {\n      if (signal && !signal.aborted) {\n        // Signal abort from timeout\n      }\n    }, this.config.timeout);\n\n    try {\n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          ...this.config.headers,\n        },\n        signal,\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        throw new Error(`Search failed: ${response.status} ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      return this.config.transform(data);\n    } catch (error) {\n      clearTimeout(timeoutId);\n      throw error;\n    }\n  }\n\n  private buildUrl(query: string): string {\n    const url = new URL(this.config.endpoint, window.location.origin);\n    url.searchParams.set(this.config.queryParam, query);\n\n    // Add additional params\n    for (const [key, value] of Object.entries(this.config.params)) {\n      url.searchParams.set(key, value);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Update the endpoint URL\n   */\n  setEndpoint(endpoint: string): void {\n    this.config.endpoint = endpoint;\n  }\n\n  /**\n   * Update additional query parameters\n   */\n  setParams(params: Record<string, string>): void {\n    this.config.params = params;\n  }\n\n  /**\n   * Update request headers\n   */\n  setHeaders(headers: Record<string, string>): void {\n    this.config.headers = headers;\n  }\n}\n\n/**\n * Create a resolver for go-crud list endpoints\n * Transforms standard go-crud pagination response to SearchResults\n */\nexport function createCrudResolver<T extends { id?: string; uuid?: string }>(\n  endpoint: string,\n  options: {\n    labelField: keyof T | ((item: T) => string);\n    descriptionField?: keyof T | ((item: T) => string);\n    iconField?: keyof T;\n    searchParam?: string;\n    headers?: Record<string, string>;\n  }\n): ApiResolver<T> {\n  return new ApiResolver<T>({\n    endpoint,\n    queryParam: options.searchParam || 'q',\n    headers: options.headers,\n    transform: (response: unknown) => {\n      // go-crud returns { data: T[], meta: {...} }\n      const data = (response as { data?: T[] }).data || (response as T[]);\n      const items = Array.isArray(data) ? data : [];\n\n      return items.map((item): SearchResult<T> => {\n        const id = String(item.id || item.uuid || '');\n        const label =\n          typeof options.labelField === 'function'\n            ? options.labelField(item)\n            : String(item[options.labelField] || '');\n        const description = options.descriptionField\n          ? typeof options.descriptionField === 'function'\n            ? options.descriptionField(item)\n            : String(item[options.descriptionField] || '')\n          : undefined;\n        const icon = options.iconField ? String(item[options.iconField] || '') : undefined;\n\n        return {\n          id,\n          label,\n          description,\n          icon,\n          metadata: item as unknown as Record<string, unknown>,\n          data: item,\n        };\n      });\n    },\n  });\n}\n","/**\n * User Renderer\n * Specialized renderer for user search results with avatar, name, email, and role\n */\n\nimport type { SearchResult, ResultRenderer, UserRendererConfig } from '../types.js';\n\nconst DEFAULT_CONFIG: UserRendererConfig = {\n  showDescription: true,\n  showIcon: true,\n  itemClass: 'px-4 py-3 hover:bg-gray-50',\n  selectedClass: 'bg-blue-50',\n  avatarField: 'avatar',\n  emailField: 'email',\n  roleField: 'role',\n  showAvatarPlaceholder: true,\n};\n\nexport class UserRenderer<T = unknown> implements ResultRenderer<T> {\n  protected config: UserRendererConfig;\n\n  constructor(config: Partial<UserRendererConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  render(result: SearchResult<T>, isSelected: boolean): string {\n    const baseClass = this.config.itemClass || '';\n    const selectedClass = isSelected ? this.config.selectedClass || '' : '';\n    const className = `${baseClass} ${selectedClass}`.trim();\n\n    const metadata = result.metadata || {};\n    const avatar = this.getMetadataValue(metadata, this.config.avatarField || 'avatar');\n    const email = this.getMetadataValue(metadata, this.config.emailField || 'email');\n    const role = this.getMetadataValue(metadata, this.config.roleField || 'role');\n\n    const avatarHtml = this.renderAvatar(avatar, result.label);\n    const roleHtml = role ? this.renderRole(role) : '';\n    const emailHtml = email ? `<p class=\"text-xs text-gray-500 truncate\">${this.escapeHtml(email)}</p>` : '';\n\n    return `\n      <div class=\"${className}\">\n        <div class=\"flex items-center gap-3\">\n          ${avatarHtml}\n          <div class=\"flex-1 min-w-0\">\n            <div class=\"flex items-center gap-2\">\n              <p class=\"text-sm font-medium text-gray-900 truncate\">${this.escapeHtml(result.label)}</p>\n              ${roleHtml}\n            </div>\n            ${emailHtml}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  protected renderAvatar(avatar: string | undefined, name: string): string {\n    if (avatar) {\n      return `<img src=\"${this.escapeHtml(avatar)}\" class=\"w-10 h-10 rounded-full object-cover flex-shrink-0\" alt=\"\" />`;\n    }\n\n    if (!this.config.showAvatarPlaceholder) {\n      return '';\n    }\n\n    // Generate initials placeholder\n    const initials = this.getInitials(name);\n    const bgColor = this.getColorForName(name);\n\n    return `\n      <div class=\"w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center text-white text-sm font-medium\" style=\"background-color: ${bgColor}\">\n        ${this.escapeHtml(initials)}\n      </div>\n    `;\n  }\n\n  protected renderRole(role: string): string {\n    const roleColors: Record<string, string> = {\n      admin: 'bg-purple-100 text-purple-800',\n      owner: 'bg-blue-100 text-blue-800',\n      editor: 'bg-green-100 text-green-800',\n      viewer: 'bg-gray-100 text-gray-800',\n      default: 'bg-gray-100 text-gray-600',\n    };\n\n    const colorClass = roleColors[role.toLowerCase()] || roleColors.default;\n\n    return `<span class=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${colorClass}\">${this.escapeHtml(role)}</span>`;\n  }\n\n  protected getInitials(name: string): string {\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n      return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();\n    }\n    return name.slice(0, 2).toUpperCase();\n  }\n\n  protected getColorForName(name: string): string {\n    // Generate a consistent color based on the name\n    const colors = [\n      '#3B82F6', // blue\n      '#10B981', // green\n      '#F59E0B', // amber\n      '#EF4444', // red\n      '#8B5CF6', // purple\n      '#EC4899', // pink\n      '#06B6D4', // cyan\n      '#F97316', // orange\n    ];\n\n    let hash = 0;\n    for (let i = 0; i < name.length; i++) {\n      hash = name.charCodeAt(i) + ((hash << 5) - hash);\n    }\n\n    return colors[Math.abs(hash) % colors.length];\n  }\n\n  protected getMetadataValue(metadata: Record<string, unknown>, field: string): string | undefined {\n    const value = metadata[field];\n    if (value === undefined || value === null) return undefined;\n    return String(value);\n  }\n\n  protected escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n}\n","/**\n * Entity Renderer\n * Specialized renderer for generic entity results with badges and metadata pills\n */\n\nimport type { SearchResult, ResultRenderer, EntityRendererConfig } from '../types.js';\n\nconst DEFAULT_CONFIG: EntityRendererConfig = {\n  showDescription: true,\n  showIcon: true,\n  itemClass: 'px-4 py-3 hover:bg-gray-50',\n  selectedClass: 'bg-blue-50',\n  badgeField: 'status',\n  badgeColors: {\n    active: 'bg-green-100 text-green-800',\n    enabled: 'bg-green-100 text-green-800',\n    inactive: 'bg-gray-100 text-gray-600',\n    disabled: 'bg-gray-100 text-gray-600',\n    pending: 'bg-yellow-100 text-yellow-800',\n    draft: 'bg-blue-100 text-blue-800',\n    archived: 'bg-red-100 text-red-800',\n    default: 'bg-gray-100 text-gray-600',\n  },\n  metadataFields: [],\n};\n\nexport class EntityRenderer<T = unknown> implements ResultRenderer<T> {\n  protected config: EntityRendererConfig;\n\n  constructor(config: Partial<EntityRendererConfig> = {}) {\n    this.config = {\n      ...DEFAULT_CONFIG,\n      ...config,\n      badgeColors: { ...DEFAULT_CONFIG.badgeColors, ...config.badgeColors },\n    };\n  }\n\n  render(result: SearchResult<T>, isSelected: boolean): string {\n    const baseClass = this.config.itemClass || '';\n    const selectedClass = isSelected ? this.config.selectedClass || '' : '';\n    const className = `${baseClass} ${selectedClass}`.trim();\n\n    const metadata = result.metadata || {};\n    const badgeValue = this.config.badgeField ? this.getMetadataValue(metadata, this.config.badgeField) : undefined;\n\n    const iconHtml = this.config.showIcon ? this.renderIcon(result.icon, result.label) : '';\n    const badgeHtml = badgeValue ? this.renderBadge(badgeValue) : '';\n    const metadataPillsHtml = this.renderMetadataPills(metadata);\n    const descriptionHtml =\n      this.config.showDescription && result.description\n        ? `<p class=\"text-xs text-gray-500 mt-0.5 truncate\">${this.escapeHtml(result.description)}</p>`\n        : '';\n\n    return `\n      <div class=\"${className}\">\n        <div class=\"flex items-center gap-3\">\n          ${iconHtml}\n          <div class=\"flex-1 min-w-0\">\n            <div class=\"flex items-center gap-2\">\n              <p class=\"text-sm font-medium text-gray-900 truncate\">${this.escapeHtml(result.label)}</p>\n              ${badgeHtml}\n            </div>\n            ${descriptionHtml}\n            ${metadataPillsHtml}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  protected renderIcon(icon: string | undefined, label: string): string {\n    if (icon) {\n      // Check if it's a URL\n      if (icon.startsWith('http') || icon.startsWith('/') || icon.startsWith('data:')) {\n        return `<img src=\"${this.escapeHtml(icon)}\" class=\"w-10 h-10 rounded-lg object-cover flex-shrink-0\" alt=\"\" />`;\n      }\n      // Otherwise it's an emoji or icon class\n      return `<span class=\"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center flex-shrink-0 text-lg\">${this.escapeHtml(icon)}</span>`;\n    }\n\n    // Generate placeholder with first letter\n    const initial = label.charAt(0).toUpperCase();\n    const bgColor = this.getColorForLabel(label);\n\n    return `\n      <div class=\"w-10 h-10 rounded-lg flex-shrink-0 flex items-center justify-center text-white text-sm font-semibold\" style=\"background-color: ${bgColor}\">\n        ${this.escapeHtml(initial)}\n      </div>\n    `;\n  }\n\n  protected renderBadge(value: string): string {\n    const colorClass =\n      this.config.badgeColors?.[value.toLowerCase()] || this.config.badgeColors?.default || 'bg-gray-100 text-gray-600';\n\n    return `<span class=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${colorClass}\">${this.escapeHtml(value)}</span>`;\n  }\n\n  protected renderMetadataPills(metadata: Record<string, unknown>): string {\n    if (!this.config.metadataFields || this.config.metadataFields.length === 0) {\n      return '';\n    }\n\n    const pills = this.config.metadataFields\n      .map((field) => {\n        const value = this.getMetadataValue(metadata, field);\n        if (!value) return null;\n\n        // Format field name for display\n        const fieldLabel = field.replace(/([A-Z])/g, ' $1').replace(/^./, (str) => str.toUpperCase());\n\n        return `<span class=\"text-xs text-gray-400\">${this.escapeHtml(fieldLabel)}: <span class=\"text-gray-600\">${this.escapeHtml(value)}</span></span>`;\n      })\n      .filter(Boolean);\n\n    if (pills.length === 0) return '';\n\n    return `<div class=\"flex items-center gap-3 mt-1\">${pills.join('')}</div>`;\n  }\n\n  protected getColorForLabel(label: string): string {\n    const colors = [\n      '#3B82F6', // blue\n      '#10B981', // green\n      '#F59E0B', // amber\n      '#EF4444', // red\n      '#8B5CF6', // purple\n      '#EC4899', // pink\n      '#06B6D4', // cyan\n      '#F97316', // orange\n    ];\n\n    let hash = 0;\n    for (let i = 0; i < label.length; i++) {\n      hash = label.charCodeAt(i) + ((hash << 5) - hash);\n    }\n\n    return colors[Math.abs(hash) % colors.length];\n  }\n\n  protected getMetadataValue(metadata: Record<string, unknown>, field: string): string | undefined {\n    const value = metadata[field];\n    if (value === undefined || value === null) return undefined;\n    return String(value);\n  }\n\n  protected escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n}\n"],"names":["DEFAULT_CONFIG","SearchBox","config","query","e","el","resolver","renderer","value","results","error","delta","selectedIndex","newIndex","result","message","items","index","isSelected","html","item","selected","text","div","ApiResolver","signal","url","timeoutId","response","data","key","endpoint","params","headers","createCrudResolver","options","id","label","description","icon","UserRenderer","baseClass","selectedClass","className","metadata","avatar","email","role","avatarHtml","roleHtml","emailHtml","name","initials","roleColors","parts","colors","hash","i","field","EntityRenderer","badgeValue","iconHtml","badgeHtml","metadataPillsHtml","descriptionHtml","initial","pills","fieldLabel","str"],"mappings":"AAaA,MAAMA,IAAiB;AAAA,EACrB,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,aAAa;AAAA,EACb,WAAW;AAAA,EACX,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,eAAe;AACjB;AAEO,MAAMC,EAAuB;AAAA,EAclC,YAAYC,GAA4B;AAItC,QAXF,KAAU,WAA+B,MAGzC,KAAQ,gBAAsD,MAC9D,KAAQ,kBAA0C,MAClD,KAAQ,uBAAyD,MAuLjE,KAAU,cAAc,MAAY;AAClC,YAAMC,IAAQ,KAAK,MAAM,MAAM,KAAA;AAG/B,UAFA,KAAK,MAAM,QAAQA,GAEfA,EAAM,SAAS,KAAK,OAAO,UAAU;AACvC,aAAK,MAAM,UAAU,CAAA,GACrB,KAAK,cAAA;AACL;AAAA,MACF;AAEA,WAAK,gBAAgBA,CAAK;AAAA,IAC5B,GAEA,KAAU,gBAAgB,CAACC,MAA2B;AACpD,UAAI,CAAC,KAAK,MAAM,QAAQ;AACtB,QAAIA,EAAE,QAAQ,eAAe,KAAK,MAAM,QAAQ,SAAS,MACvDA,EAAE,eAAA,GACF,KAAK,aAAA;AAEP;AAAA,MACF;AAEA,cAAQA,EAAE,KAAA;AAAA,QACR,KAAK;AACH,UAAAA,EAAE,eAAA,GACF,KAAK,cAAc,CAAC;AACpB;AAAA,QACF,KAAK;AACH,UAAAA,EAAE,eAAA,GACF,KAAK,cAAc,EAAE;AACrB;AAAA,QACF,KAAK;AACH,UAAAA,EAAE,eAAA,GACF,KAAK,cAAA;AACL;AAAA,QACF,KAAK;AACH,UAAAA,EAAE,eAAA,GACF,KAAK,cAAA;AACL;AAAA,QACF,KAAK;AACH,eAAK,cAAA;AACL;AAAA,MAAA;AAAA,IAEN,GAEA,KAAU,cAAc,MAAY;AAClC,MAAI,KAAK,MAAM,QAAQ,SAAS,KAAK,KAAK,MAAM,MAAM,UAAU,KAAK,OAAO,YAC1E,KAAK,aAAA;AAAA,IAET,GArOE,KAAK,SAAS,EAAE,GAAGJ,GAAgB,GAAGE,EAAA,GAGlC,OAAOA,EAAO,SAAU,UAAU;AACpC,YAAMG,IAAK,SAAS,cAAgCH,EAAO,KAAK;AAChE,UAAI,CAACG,EAAI,OAAM,IAAI,MAAM,uCAAuCH,EAAO,KAAK,EAAE;AAC9E,WAAK,QAAQG;AAAA,IACf;AACE,WAAK,QAAQH,EAAO;AAItB,QAAIA,EAAO;AACT,UAAI,OAAOA,EAAO,aAAc,UAAU;AACxC,cAAMG,IAAK,SAAS,cAA2BH,EAAO,SAAS;AAC/D,YAAI,CAACG,EAAI,OAAM,IAAI,MAAM,2CAA2CH,EAAO,SAAS,EAAE;AACtF,aAAK,YAAYG;AAAA,MACnB;AACE,aAAK,YAAYH,EAAO;AAAA;AAG1B,WAAK,YAAY,KAAK,MAAM,iBAAiB,SAAS;AAIxD,SAAK,QAAQ;AAAA,MACX,OAAO;AAAA,MACP,SAAS,CAAA;AAAA,MACT,eAAe;AAAA,MACf,QAAQ;AAAA,MACR,WAAW;AAAA,MACX,OAAO;AAAA,IAAA;AAAA,EAEX;AAAA;AAAA;AAAA;AAAA,EAKA,OAAa;AACX,SAAK,eAAA,GACL,KAAK,WAAA,GACD,KAAK,OAAO,gBACd,KAAK,MAAM,cAAc,KAAK,OAAO;AAAA,EAEzC;AAAA;AAAA;AAAA;AAAA,EAKA,UAAgB;AACd,SAAK,oBAAA,GACL,KAAK,eAAA,GACL,KAAK,aAAA;AAAA,EACP;AAAA;AAAA;AAAA;AAAA,EAKA,cAAiC;AAC/B,WAAO,KAAK,OAAO;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAKA,YAAYI,GAAmC;AAC7C,SAAK,OAAO,WAAWA,GACvB,KAAK,MAAA;AAAA,EACP;AAAA;AAAA;AAAA;AAAA,EAKA,cAAiC;AAC/B,WAAO,KAAK,OAAO;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAKA,YAAYC,GAAmC;AAC7C,SAAK,OAAO,WAAWA,GACnB,KAAK,MAAM,QAAQ,SAAS,KAC9B,KAAK,cAAA;AAAA,EAET;AAAA;AAAA;AAAA;AAAA,EAKA,QAAc;AACZ,SAAK,MAAM,QAAQ,IACnB,KAAK,MAAM,QAAQ,IACnB,KAAK,MAAM,UAAU,CAAA,GACrB,KAAK,MAAM,gBAAgB,IAC3B,KAAK,MAAM,QAAQ,MACnB,KAAK,cAAA,GACL,KAAK,OAAO,UAAA;AAAA,EACd;AAAA;AAAA;AAAA;AAAA,EAKA,oBAA4C;AAC1C,WAAI,KAAK,MAAM,iBAAiB,KAAK,KAAK,MAAM,gBAAgB,KAAK,MAAM,QAAQ,SAC1E,KAAK,MAAM,QAAQ,KAAK,MAAM,aAAa,IAE7C;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,WAAwC;AACtC,WAAO,EAAE,GAAG,KAAK,MAAA;AAAA,EACnB;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,OAAOJ,GAA8B;AACzC,SAAK,MAAM,QAAQA,GACnB,MAAM,KAAK,cAAcA,CAAK;AAAA,EAChC;AAAA;AAAA;AAAA;AAAA,EAKA,SAASK,GAAqB;AAC5B,SAAK,MAAM,QAAQA,GACnB,KAAK,MAAM,QAAQA;AAAA,EACrB;AAAA,EAEU,iBAAuB;AAC/B,SAAK,WAAW,SAAS,cAAc,KAAK,GAC5C,KAAK,SAAS,YAAY,4HAA4H,KAAK,OAAO,aAAa,IAC/K,KAAK,SAAS,aAAa,QAAQ,SAAS,GAC5C,KAAK,SAAS,aAAa,cAAc,gBAAgB,GAG/B,iBAAiB,KAAK,SAAS,EAAE,aACjC,aACxB,KAAK,UAAU,MAAM,WAAW,aAGlC,KAAK,UAAU,YAAY,KAAK,QAAQ;AAAA,EAC1C;AAAA,EAEU,iBAAuB;AAC/B,IAAI,KAAK,aACP,KAAK,SAAS,OAAA,GACd,KAAK,WAAW;AAAA,EAEpB;AAAA,EAEU,aAAmB;AAC3B,SAAK,MAAM,iBAAiB,SAAS,KAAK,WAAW,GACrD,KAAK,MAAM,iBAAiB,WAAW,KAAK,aAAa,GACzD,KAAK,MAAM,iBAAiB,SAAS,KAAK,WAAW,GAGrD,KAAK,uBAAuB,CAAC,MAAkB;AAC7C,MAAK,KAAK,UAAU,SAAS,EAAE,MAAc,KAC3C,KAAK,cAAA;AAAA,IAET,GACA,SAAS,iBAAiB,SAAS,KAAK,oBAAoB;AAAA,EAC9D;AAAA,EAEU,eAAqB;AAC7B,SAAK,MAAM,oBAAoB,SAAS,KAAK,WAAW,GACxD,KAAK,MAAM,oBAAoB,WAAW,KAAK,aAAa,GAC5D,KAAK,MAAM,oBAAoB,SAAS,KAAK,WAAW,GAEpD,KAAK,yBACP,SAAS,oBAAoB,SAAS,KAAK,oBAAoB,GAC/D,KAAK,uBAAuB;AAAA,EAEhC;AAAA,EAqDU,gBAAgBL,GAAqB;AAC7C,SAAK,oBAAA,GAEL,KAAK,gBAAgB,WAAW,MAAM;AACpC,WAAK,cAAcA,CAAK;AAAA,IAC1B,GAAG,KAAK,OAAO,UAAU;AAAA,EAC3B;AAAA,EAEA,MAAgB,cAAcA,GAA8B;AAG1D,QAFA,KAAK,oBAAA,GAED,EAAAA,EAAM,SAAS,KAAK,OAAO,WAI/B;AAAA,WAAK,MAAM,YAAY,IACvB,KAAK,MAAM,QAAQ,MACnB,KAAK,OAAO,gBAAgBA,CAAK,GACjC,KAAK,cAAA,GACL,KAAK,aAAA,GAEL,KAAK,kBAAkB,IAAI,gBAAA;AAE3B,UAAI;AACF,YAAIM,IAAU,MAAM,KAAK,OAAO,SAAS,OAAON,GAAO,KAAK,gBAAgB,MAAM;AAGlF,QAAIM,EAAQ,SAAS,KAAK,OAAO,eAC/BA,IAAUA,EAAQ,MAAM,GAAG,KAAK,OAAO,UAAU,IAGnD,KAAK,MAAM,UAAUA,GACrB,KAAK,MAAM,gBAAgBA,EAAQ,SAAS,IAAI,IAAI,IACpD,KAAK,MAAM,YAAY,IAEvB,KAAK,cAAA,GACL,KAAK,OAAO,mBAAmBA,CAAO;AAAA,MACxC,SAASC,GAAO;AACd,YAAKA,EAAgB,SAAS;AAC5B;AAGF,aAAK,MAAM,QAAQA,GACnB,KAAK,MAAM,YAAY,IACvB,KAAK,YAAA,GACL,KAAK,OAAO,UAAUA,CAAc;AAAA,MACtC;AAAA;AAAA,EACF;AAAA,EAEU,sBAA4B;AACpC,IAAI,KAAK,kBACP,aAAa,KAAK,aAAa,GAC/B,KAAK,gBAAgB,OAEnB,KAAK,oBACP,KAAK,gBAAgB,MAAA,GACrB,KAAK,kBAAkB;AAAA,EAE3B;AAAA,EAEU,cAAcC,GAAqB;AAC3C,UAAM,EAAE,SAAAF,GAAS,eAAAG,EAAA,IAAkB,KAAK;AACxC,QAAIH,EAAQ,WAAW,EAAG;AAE1B,QAAII,IAAWD,IAAgBD;AAC/B,IAAIE,IAAW,MAAGA,IAAWJ,EAAQ,SAAS,IAC1CI,KAAYJ,EAAQ,WAAQI,IAAW,IAE3C,KAAK,MAAM,gBAAgBA,GAC3B,KAAK,cAAA,GACL,KAAK,iBAAA;AAAA,EACP;AAAA,EAEU,gBAAsB;AAC9B,UAAMC,IAAS,KAAK,kBAAA;AACpB,IAAIA,KACF,KAAK,aAAaA,CAAM;AAAA,EAE5B;AAAA,EAEU,aAAaA,GAA+B;AACpD,SAAK,MAAM,QAAQA,EAAO,OAC1B,KAAK,MAAM,QAAQA,EAAO,OAC1B,KAAK,cAAA,GACL,KAAK,OAAO,WAAWA,CAAM;AAAA,EAC/B;AAAA,EAEU,eAAqB;AAC7B,IAAK,KAAK,aACV,KAAK,MAAM,SAAS,IACpB,KAAK,SAAS,UAAU,OAAO,QAAQ;AAAA,EACzC;AAAA,EAEU,gBAAsB;AAC9B,IAAK,KAAK,aACV,KAAK,MAAM,SAAS,IACpB,KAAK,SAAS,UAAU,IAAI,QAAQ;AAAA,EACtC;AAAA,EAEU,gBAAsB;AAC9B,IAAK,KAAK,aACV,KAAK,SAAS,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAMpB,KAAK,WAAW,KAAK,OAAO,WAAW,CAAC;AAAA;AAAA;AAAA,EAGhD;AAAA,EAEU,cAAoB;AAC5B,QAAI,CAAC,KAAK,SAAU;AACpB,UAAMC,IAAU,KAAK,MAAM,OAAO,WAAW;AAC7C,SAAK,SAAS,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,UAKpB,KAAK,WAAWA,CAAO,CAAC;AAAA;AAAA;AAAA,EAGhC;AAAA,EAEU,gBAAsB;AAC9B,QAAI,CAAC,KAAK,SAAU;AAEpB,UAAM,EAAE,SAAAN,GAAS,eAAAG,EAAA,IAAkB,KAAK;AAExC,QAAIH,EAAQ,WAAW,GAAG;AACxB,WAAK,SAAS,YAAY;AAAA;AAAA,YAEpB,KAAK,WAAW,KAAK,OAAO,SAAS,CAAC;AAAA;AAAA;AAG5C;AAAA,IACF;AAEA,UAAMO,IAAQP,EAAQ,IAAI,CAACK,GAAQG,MAAU;AAC3C,YAAMC,IAAaD,MAAUL,GACvBO,IAAO,KAAK,OAAO,SAAS,OAAOL,GAAQI,CAAU;AAC3D,aAAO;AAAA;AAAA;AAAA,wBAGWD,CAAK;AAAA;AAAA,2BAEFC,CAAU;AAAA;AAAA,YAEzBC,CAAI;AAAA;AAAA;AAAA,IAGZ,CAAC;AAED,SAAK,SAAS,YAAYH,EAAM,KAAK,EAAE,GAGvC,KAAK,SAAS,iBAAiB,iBAAiB,EAAE,QAAQ,CAACI,MAAS;AAClE,MAAAA,EAAK,iBAAiB,SAAS,CAAChB,MAAM;AACpC,QAAAA,EAAE,gBAAA;AACF,cAAMa,IAAQ,SAAUG,EAAqB,QAAQ,SAAS,KAAK,EAAE,GAC/DN,IAASL,EAAQQ,CAAK;AAC5B,QAAIH,KACF,KAAK,aAAaA,CAAM;AAAA,MAE5B,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA,EAEU,mBAAyB;AACjC,QAAI,CAAC,KAAK,SAAU;AACpB,UAAMO,IAAW,KAAK,SAAS,cAAc,wBAAwB;AACrE,IAAIA,KACFA,EAAS,eAAe,EAAE,OAAO,UAAA,CAAW;AAAA,EAEhD;AAAA,EAEU,WAAWC,GAAsB;AACzC,UAAMC,IAAM,SAAS,cAAc,KAAK;AACxC,WAAAA,EAAI,cAAcD,GACXC,EAAI;AAAA,EACb;AACF;AC5bA,MAAMvB,IAAiB;AAAA,EACrB,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,QAAQ,CAAA;AAAA,EACR,SAAS,CAAA;AACX;AAEO,MAAMwB,EAAsD;AAAA,EAIjE,YAAYtB,GAA8B;AACxC,SAAK,SAAS,EAAE,GAAGF,GAAgB,GAAGE,EAAA;AAAA,EACxC;AAAA,EAEA,MAAM,OAAOC,GAAesB,GAAkD;AAC5E,UAAMC,IAAM,KAAK,SAASvB,CAAK,GAEzBwB,IAAY,WAAW,MAAM;AACjC,MAAIF,KAAWA,EAAO;AAAA,IAGxB,GAAG,KAAK,OAAO,OAAO;AAEtB,QAAI;AACF,YAAMG,IAAW,MAAM,MAAMF,GAAK;AAAA,QAChC,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,QAAQ;AAAA,UACR,GAAG,KAAK,OAAO;AAAA,QAAA;AAAA,QAEjB,QAAAD;AAAA,MAAA,CACD;AAID,UAFA,aAAaE,CAAS,GAElB,CAACC,EAAS;AACZ,cAAM,IAAI,MAAM,kBAAkBA,EAAS,MAAM,IAAIA,EAAS,UAAU,EAAE;AAG5E,YAAMC,IAAO,MAAMD,EAAS,KAAA;AAC5B,aAAO,KAAK,OAAO,UAAUC,CAAI;AAAA,IACnC,SAASnB,GAAO;AACd,yBAAaiB,CAAS,GAChBjB;AAAA,IACR;AAAA,EACF;AAAA,EAEQ,SAASP,GAAuB;AACtC,UAAMuB,IAAM,IAAI,IAAI,KAAK,OAAO,UAAU,OAAO,SAAS,MAAM;AAChE,IAAAA,EAAI,aAAa,IAAI,KAAK,OAAO,YAAYvB,CAAK;AAGlD,eAAW,CAAC2B,GAAKtB,CAAK,KAAK,OAAO,QAAQ,KAAK,OAAO,MAAM;AAC1D,MAAAkB,EAAI,aAAa,IAAII,GAAKtB,CAAK;AAGjC,WAAOkB,EAAI,SAAA;AAAA,EACb;AAAA;AAAA;AAAA;AAAA,EAKA,YAAYK,GAAwB;AAClC,SAAK,OAAO,WAAWA;AAAA,EACzB;AAAA;AAAA;AAAA;AAAA,EAKA,UAAUC,GAAsC;AAC9C,SAAK,OAAO,SAASA;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,WAAWC,GAAuC;AAChD,SAAK,OAAO,UAAUA;AAAA,EACxB;AACF;AAMO,SAASC,EACdH,GACAI,GAOgB;AAChB,SAAO,IAAIX,EAAe;AAAA,IACxB,UAAAO;AAAA,IACA,YAAYI,EAAQ,eAAe;AAAA,IACnC,SAASA,EAAQ;AAAA,IACjB,WAAW,CAACP,MAAsB;AAEhC,YAAMC,IAAQD,EAA4B,QAASA;AAGnD,cAFc,MAAM,QAAQC,CAAI,IAAIA,IAAO,CAAA,GAE9B,IAAI,CAACT,MAA0B;AAC1C,cAAMgB,IAAK,OAAOhB,EAAK,MAAMA,EAAK,QAAQ,EAAE,GACtCiB,IACJ,OAAOF,EAAQ,cAAe,aAC1BA,EAAQ,WAAWf,CAAI,IACvB,OAAOA,EAAKe,EAAQ,UAAU,KAAK,EAAE,GACrCG,IAAcH,EAAQ,mBACxB,OAAOA,EAAQ,oBAAqB,aAClCA,EAAQ,iBAAiBf,CAAI,IAC7B,OAAOA,EAAKe,EAAQ,gBAAgB,KAAK,EAAE,IAC7C,QACEI,IAAOJ,EAAQ,YAAY,OAAOf,EAAKe,EAAQ,SAAS,KAAK,EAAE,IAAI;AAEzE,eAAO;AAAA,UACL,IAAAC;AAAA,UACA,OAAAC;AAAA,UACA,aAAAC;AAAA,UACA,MAAAC;AAAA,UACA,UAAUnB;AAAA,UACV,MAAMA;AAAA,QAAA;AAAA,MAEV,CAAC;AAAA,IACH;AAAA,EAAA,CACD;AACH;ACjIA,MAAMpB,IAAqC;AAAA,EACzC,iBAAiB;AAAA,EACjB,UAAU;AAAA,EACV,WAAW;AAAA,EACX,eAAe;AAAA,EACf,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,uBAAuB;AACzB;AAEO,MAAMwC,EAAuD;AAAA,EAGlE,YAAYtC,IAAsC,IAAI;AACpD,SAAK,SAAS,EAAE,GAAGF,GAAgB,GAAGE,EAAA;AAAA,EACxC;AAAA,EAEA,OAAOY,GAAyBI,GAA6B;AAC3D,UAAMuB,IAAY,KAAK,OAAO,aAAa,IACrCC,IAAgBxB,KAAa,KAAK,OAAO,iBAAiB,IAC1DyB,IAAY,GAAGF,CAAS,IAAIC,CAAa,GAAG,KAAA,GAE5CE,IAAW9B,EAAO,YAAY,CAAA,GAC9B+B,IAAS,KAAK,iBAAiBD,GAAU,KAAK,OAAO,eAAe,QAAQ,GAC5EE,IAAQ,KAAK,iBAAiBF,GAAU,KAAK,OAAO,cAAc,OAAO,GACzEG,IAAO,KAAK,iBAAiBH,GAAU,KAAK,OAAO,aAAa,MAAM,GAEtEI,IAAa,KAAK,aAAaH,GAAQ/B,EAAO,KAAK,GACnDmC,IAAWF,IAAO,KAAK,WAAWA,CAAI,IAAI,IAC1CG,IAAYJ,IAAQ,6CAA6C,KAAK,WAAWA,CAAK,CAAC,SAAS;AAEtG,WAAO;AAAA,oBACSH,CAAS;AAAA;AAAA,YAEjBK,CAAU;AAAA;AAAA;AAAA,sEAGgD,KAAK,WAAWlC,EAAO,KAAK,CAAC;AAAA,gBACnFmC,CAAQ;AAAA;AAAA,cAEVC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,EAKrB;AAAA,EAEU,aAAaL,GAA4BM,GAAsB;AACvE,QAAIN;AACF,aAAO,aAAa,KAAK,WAAWA,CAAM,CAAC;AAG7C,QAAI,CAAC,KAAK,OAAO;AACf,aAAO;AAIT,UAAMO,IAAW,KAAK,YAAYD,CAAI;AAGtC,WAAO;AAAA,mJAFS,KAAK,gBAAgBA,CAAI,CAG6G;AAAA,UAChJ,KAAK,WAAWC,CAAQ,CAAC;AAAA;AAAA;AAAA,EAGjC;AAAA,EAEU,WAAWL,GAAsB;AACzC,UAAMM,IAAqC;AAAA,MACzC,OAAO;AAAA,MACP,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,SAAS;AAAA,IAAA;AAKX,WAAO,iFAFYA,EAAWN,EAAK,YAAA,CAAa,KAAKM,EAAW,OAEkC,KAAK,KAAK,WAAWN,CAAI,CAAC;AAAA,EAC9H;AAAA,EAEU,YAAYI,GAAsB;AAC1C,UAAMG,IAAQH,EAAK,KAAA,EAAO,MAAM,KAAK;AACrC,WAAIG,EAAM,UAAU,KACVA,EAAM,CAAC,EAAE,CAAC,IAAIA,EAAMA,EAAM,SAAS,CAAC,EAAE,CAAC,GAAG,YAAA,IAE7CH,EAAK,MAAM,GAAG,CAAC,EAAE,YAAA;AAAA,EAC1B;AAAA,EAEU,gBAAgBA,GAAsB;AAE9C,UAAMI,IAAS;AAAA,MACb;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,IAAA;AAGF,QAAIC,IAAO;AACX,aAASC,IAAI,GAAGA,IAAIN,EAAK,QAAQM;AAC/B,MAAAD,IAAOL,EAAK,WAAWM,CAAC,MAAMD,KAAQ,KAAKA;AAG7C,WAAOD,EAAO,KAAK,IAAIC,CAAI,IAAID,EAAO,MAAM;AAAA,EAC9C;AAAA,EAEU,iBAAiBX,GAAmCc,GAAmC;AAC/F,UAAMlD,IAAQoC,EAASc,CAAK;AAC5B,QAA2BlD,KAAU;AACrC,aAAO,OAAOA,CAAK;AAAA,EACrB;AAAA,EAEU,WAAWc,GAAsB;AACzC,UAAMC,IAAM,SAAS,cAAc,KAAK;AACxC,WAAAA,EAAI,cAAcD,GACXC,EAAI;AAAA,EACb;AACF;AC1HA,MAAMvB,IAAuC;AAAA,EAC3C,iBAAiB;AAAA,EACjB,UAAU;AAAA,EACV,WAAW;AAAA,EACX,eAAe;AAAA,EACf,YAAY;AAAA,EACZ,aAAa;AAAA,IACX,QAAQ;AAAA,IACR,SAAS;AAAA,IACT,UAAU;AAAA,IACV,UAAU;AAAA,IACV,SAAS;AAAA,IACT,OAAO;AAAA,IACP,UAAU;AAAA,IACV,SAAS;AAAA,EAAA;AAAA,EAEX,gBAAgB,CAAA;AAClB;AAEO,MAAM2D,EAAyD;AAAA,EAGpE,YAAYzD,IAAwC,IAAI;AACtD,SAAK,SAAS;AAAA,MACZ,GAAGF;AAAA,MACH,GAAGE;AAAA,MACH,aAAa,EAAE,GAAGF,EAAe,aAAa,GAAGE,EAAO,YAAA;AAAA,IAAY;AAAA,EAExE;AAAA,EAEA,OAAOY,GAAyBI,GAA6B;AAC3D,UAAMuB,IAAY,KAAK,OAAO,aAAa,IACrCC,IAAgBxB,KAAa,KAAK,OAAO,iBAAiB,IAC1DyB,IAAY,GAAGF,CAAS,IAAIC,CAAa,GAAG,KAAA,GAE5CE,IAAW9B,EAAO,YAAY,CAAA,GAC9B8C,IAAa,KAAK,OAAO,aAAa,KAAK,iBAAiBhB,GAAU,KAAK,OAAO,UAAU,IAAI,QAEhGiB,IAAW,KAAK,OAAO,WAAW,KAAK,WAAW/C,EAAO,MAAMA,EAAO,KAAK,IAAI,IAC/EgD,IAAYF,IAAa,KAAK,YAAYA,CAAU,IAAI,IACxDG,IAAoB,KAAK,oBAAoBnB,CAAQ,GACrDoB,IACJ,KAAK,OAAO,mBAAmBlD,EAAO,cAClC,oDAAoD,KAAK,WAAWA,EAAO,WAAW,CAAC,SACvF;AAEN,WAAO;AAAA,oBACS6B,CAAS;AAAA;AAAA,YAEjBkB,CAAQ;AAAA;AAAA;AAAA,sEAGkD,KAAK,WAAW/C,EAAO,KAAK,CAAC;AAAA,gBACnFgD,CAAS;AAAA;AAAA,cAEXE,CAAe;AAAA,cACfD,CAAiB;AAAA;AAAA;AAAA;AAAA;AAAA,EAK7B;AAAA,EAEU,WAAWxB,GAA0BF,GAAuB;AACpE,QAAIE;AAEF,aAAIA,EAAK,WAAW,MAAM,KAAKA,EAAK,WAAW,GAAG,KAAKA,EAAK,WAAW,OAAO,IACrE,aAAa,KAAK,WAAWA,CAAI,CAAC,wEAGpC,yGAAyG,KAAK,WAAWA,CAAI,CAAC;AAIvI,UAAM0B,IAAU5B,EAAM,OAAO,CAAC,EAAE,YAAA;AAGhC,WAAO;AAAA,mJAFS,KAAK,iBAAiBA,CAAK,CAG2G;AAAA,UAChJ,KAAK,WAAW4B,CAAO,CAAC;AAAA;AAAA;AAAA,EAGhC;AAAA,EAEU,YAAYzD,GAAuB;AAI3C,WAAO,iFAFL,KAAK,OAAO,cAAcA,EAAM,YAAA,CAAa,KAAK,KAAK,OAAO,aAAa,WAAW,2BAEU,KAAK,KAAK,WAAWA,CAAK,CAAC;AAAA,EAC/H;AAAA,EAEU,oBAAoBoC,GAA2C;AACvE,QAAI,CAAC,KAAK,OAAO,kBAAkB,KAAK,OAAO,eAAe,WAAW;AACvE,aAAO;AAGT,UAAMsB,IAAQ,KAAK,OAAO,eACvB,IAAI,CAACR,MAAU;AACd,YAAMlD,IAAQ,KAAK,iBAAiBoC,GAAUc,CAAK;AACnD,UAAI,CAAClD,EAAO,QAAO;AAGnB,YAAM2D,IAAaT,EAAM,QAAQ,YAAY,KAAK,EAAE,QAAQ,MAAM,CAACU,MAAQA,EAAI,YAAA,CAAa;AAE5F,aAAO,uCAAuC,KAAK,WAAWD,CAAU,CAAC,iCAAiC,KAAK,WAAW3D,CAAK,CAAC;AAAA,IAClI,CAAC,EACA,OAAO,OAAO;AAEjB,WAAI0D,EAAM,WAAW,IAAU,KAExB,6CAA6CA,EAAM,KAAK,EAAE,CAAC;AAAA,EACpE;AAAA,EAEU,iBAAiB7B,GAAuB;AAChD,UAAMkB,IAAS;AAAA,MACb;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,MACA;AAAA;AAAA,IAAA;AAGF,QAAIC,IAAO;AACX,aAASC,IAAI,GAAGA,IAAIpB,EAAM,QAAQoB;AAChC,MAAAD,IAAOnB,EAAM,WAAWoB,CAAC,MAAMD,KAAQ,KAAKA;AAG9C,WAAOD,EAAO,KAAK,IAAIC,CAAI,IAAID,EAAO,MAAM;AAAA,EAC9C;AAAA,EAEU,iBAAiBX,GAAmCc,GAAmC;AAC/F,UAAMlD,IAAQoC,EAASc,CAAK;AAC5B,QAA2BlD,KAAU;AACrC,aAAO,OAAOA,CAAK;AAAA,EACrB;AAAA,EAEU,WAAWc,GAAsB;AACzC,UAAMC,IAAM,SAAS,cAAc,KAAK;AACxC,WAAAA,EAAI,cAAcD,GACXC,EAAI;AAAA,EACb;AACF;"}