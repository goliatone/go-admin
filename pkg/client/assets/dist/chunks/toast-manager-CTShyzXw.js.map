{"version":3,"file":"toast-manager-CTShyzXw.js","sources":["../../src/toast/toast-manager.ts"],"sourcesContent":["import type { ToastNotifier, ToastOptions, ConfirmOptions } from './types.js';\nimport { ConfirmModal } from '../shared/modal.js';\n\ntype ToastPosition = 'top-right' | 'top-center' | 'bottom-right' | 'bottom-center';\n\ninterface ToastManagerOptions {\n  position?: ToastPosition;\n}\n\n/**\n * Toast notification manager\n * Manages toast notifications with auto-dismiss and stacking\n */\nexport class ToastManager implements ToastNotifier {\n  private container: HTMLElement;\n  private toasts: Map<string, HTMLElement> = new Map();\n  private position: ToastPosition;\n\n  constructor(options: ToastManagerOptions = {}) {\n    this.position = options.position || 'top-right';\n    this.container = this.getOrCreateContainer();\n    this.applyContainerClasses(this.container);\n  }\n\n  private getOrCreateContainer(): HTMLElement {\n    const existing = document.getElementById('toast-container');\n    if (existing) return existing;\n\n    const container = document.createElement('div');\n    container.id = 'toast-container';\n    document.body.appendChild(container);\n    return container;\n  }\n\n  private applyContainerClasses(container: HTMLElement): void {\n    const positionClasses: Array<`toast-${ToastPosition}`> = [\n      'toast-top-right',\n      'toast-top-center',\n      'toast-bottom-right',\n      'toast-bottom-center',\n    ];\n\n    container.classList.add('toast-container');\n    positionClasses.forEach((cls) => container.classList.remove(cls));\n    container.classList.add(`toast-${this.position}`);\n  }\n\n  show(options: ToastOptions): void {\n    const id = `toast-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n    const toast = this.createToastElement(id, options);\n\n    this.container.appendChild(toast);\n    this.toasts.set(id, toast);\n\n    // Trigger enter animation\n    requestAnimationFrame(() => {\n      toast.classList.add('toast-enter-active');\n    });\n\n    // Auto-dismiss after duration (default 5 seconds)\n    const duration = options.duration !== undefined ? options.duration : 5000;\n    if (duration > 0) {\n      setTimeout(() => this.dismiss(id), duration);\n    }\n  }\n\n  success(message: string, duration?: number): void {\n    this.show({ message, type: 'success', duration, dismissible: true });\n  }\n\n  error(message: string, duration?: number): void {\n    this.show({ message, type: 'error', duration: duration || 0, dismissible: true });\n  }\n\n  warning(message: string, duration?: number): void {\n    this.show({ message, type: 'warning', duration, dismissible: true });\n  }\n\n  info(message: string, duration?: number): void {\n    this.show({ message, type: 'info', duration, dismissible: true });\n  }\n\n  async confirm(message: string, options: ConfirmOptions = {}): Promise<boolean> {\n    return ConfirmModal.confirm(message, {\n      title: options.title,\n      confirmText: options.confirmText,\n      cancelText: options.cancelText,\n    });\n  }\n\n  private createToastElement(id: string, options: ToastOptions): HTMLElement {\n    const toast = document.createElement('div');\n    toast.className = `toast toast-${options.type}`;\n    toast.setAttribute('data-toast-id', id);\n\n    const icon = this.getIconForType(options.type);\n\n    toast.innerHTML = `\n      <div class=\"toast-header\">\n        <div class=\"toast-header-left\">\n          <div class=\"toast-icon toast-icon-${options.type}\">\n            ${icon}\n          </div>\n          <svg class=\"toast-pin-icon w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z\"/>\n          </svg>\n          <div class=\"toast-title\">${this.escapeHtml(options.title || this.getDefaultTitle(options.type))}</div>\n        </div>\n        ${options.dismissible !== false ? `\n          <button class=\"toast-dismiss\" aria-label=\"Dismiss\">\n            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n            </svg>\n          </button>\n        ` : ''}\n      </div>\n      <div class=\"toast-content\">\n        <div class=\"toast-message\">${this.escapeHtml(options.message)}</div>\n      </div>\n    `;\n\n    // Bind dismiss button\n    if (options.dismissible !== false) {\n      const dismissBtn = toast.querySelector('.toast-dismiss');\n      if (dismissBtn) {\n        dismissBtn.addEventListener('click', () => this.dismiss(id));\n      }\n    }\n\n    return toast;\n  }\n\n  private dismiss(id: string): void {\n    const toast = this.toasts.get(id);\n    if (!toast) return;\n\n    toast.classList.remove('toast-enter-active');\n    toast.classList.add('toast-leave-active');\n\n    setTimeout(() => {\n      toast.remove();\n      this.toasts.delete(id);\n    }, 300); // Match CSS transition duration\n  }\n\n  private getDefaultTitle(type: string): string {\n    const titles: Record<string, string> = {\n      success: 'Success notification',\n      error: 'Error notification',\n      warning: 'Warning notification',\n      info: 'Informational notification'\n    };\n    return titles[type] || 'Notification';\n  }\n\n  private getIconForType(type: string): string {\n    const icons: Record<string, string> = {\n      success: `<svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"/>\n      </svg>`,\n      error: `<svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\"/>\n      </svg>`,\n      warning: `<svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\"/>\n      </svg>`,\n      info: `<svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"/>\n      </svg>`\n    };\n    return icons[type] || icons.info;\n  }\n\n  private escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n}\n\n/**\n * Fallback notifier that uses native alert/confirm\n * Used when no ToastManager is configured (backwards compatibility)\n */\nexport class FallbackNotifier implements ToastNotifier {\n  show(options: ToastOptions): void {\n    const prefix = options.title ? `${options.title}: ` : '';\n    alert(prefix + options.message);\n  }\n\n  success(message: string): void {\n    alert(message);\n  }\n\n  error(message: string): void {\n    alert('Error: ' + message);\n  }\n\n  warning(message: string): void {\n    alert('Warning: ' + message);\n  }\n\n  info(message: string): void {\n    alert(message);\n  }\n\n  async confirm(message: string, options?: ConfirmOptions): Promise<boolean> {\n    const prefix = options?.title ? `${options.title}\\n\\n` : '';\n    return Promise.resolve(confirm(prefix + message));\n  }\n}\n"],"names":["ToastManager","options","existing","container","positionClasses","cls","id","toast","duration","message","ConfirmModal","icon","dismissBtn","type","icons","text","div","FallbackNotifier","prefix"],"mappings":"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"}