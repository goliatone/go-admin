CREATE TABLE IF NOT EXISTS translation_assignments (
    id TEXT PRIMARY KEY,
    translation_group_id TEXT NOT NULL,
    entity_type TEXT NOT NULL,
    source_record_id TEXT NOT NULL,
    source_locale TEXT NOT NULL,
    target_locale TEXT NOT NULL,
    target_record_id TEXT,
    source_title TEXT,
    source_path TEXT,
    assignment_type TEXT NOT NULL CHECK (assignment_type IN ('assigned', 'open_pool')),
    status TEXT NOT NULL CHECK (status IN ('pending', 'assigned', 'in_progress', 'review', 'rejected', 'approved', 'published', 'archived')),
    priority TEXT NOT NULL DEFAULT 'normal' CHECK (priority IN ('low', 'normal', 'high', 'urgent')),
    due_date TIMESTAMP,
    assignee_id TEXT,
    assigner_id TEXT,
    last_reviewer_id TEXT,
    last_rejection_reason TEXT,
    version BIGINT NOT NULL DEFAULT 1,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    claimed_at TIMESTAMP,
    submitted_at TIMESTAMP,
    approved_at TIMESTAMP,
    published_at TIMESTAMP,
    archived_at TIMESTAMP
);
